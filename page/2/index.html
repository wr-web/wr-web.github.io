<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>R0gerThat</title><meta name="author" content="RT"><meta name="copyright" content="RT"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="@Vidar-Team @CTFer @Game Lover">
<meta property="og:type" content="website">
<meta property="og:title" content="R0gerThat">
<meta property="og:url" content="https://wr-web.github.io/page/2/index.html">
<meta property="og:site_name" content="R0gerThat">
<meta property="og:description" content="@Vidar-Team @CTFer @Game Lover">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.imgs.ovh/2023/10/13/XDQ7p.jpeg">
<meta property="article:author" content="RT">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgs.ovh/2023/10/13/XDQ7p.jpeg"><link rel="shortcut icon" href="https://i.imgs.ovh/2023/10/13/XE2L0.png"><link rel="canonical" href="https://wr-web.github.io/page/2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'R0gerThat',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-10-13 23:19:25'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="R0gerThat" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.imgs.ovh/2023/10/13/XDQ7p.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://i.imgs.ovh/2023/10/13/XDzk2.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="R0gerThat"><span class="site-name">R0gerThat</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">R0gerThat</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="/2023/09/22/%E6%95%A3%E8%A8%98-9-22-23/" title="LLVM 學習笔记">LLVM 學習笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-09-22T04:00:00.000Z" title="发表于 2023-09-22 12:00:00">2023-09-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Notes/">Notes</a></span></div><div class="content">LLVM 學習LLVM 全稱是 Low Level Virtual Machine，開始時還不太理解 LLVM 到底有啥用，爲什麽這麽好用。
衆所周知 gcc 也可以劃分爲相應的 前端 中端 後端。爲什麽 gcc 沒有 llvm 怎麽好用，可見 llvm 的結構設計的比較優秀，非常適合代碼 reuse。把 AST 等 IR 做了隔離，讓我們可以非常方便的利用 IR 做一些工作。
接下來我打算從前端開始學習 LLVM 的源碼。 我認爲（書上寫的）還是先試一下這個 reuse 的特性。To be honest，之前并沒有學過 cmake，遇到問題了，基本也只是在源代碼的上面進行一點修改，並不需要掌握這個能力，趁現在我們也可以學習鞏固一番相關的知識。
今天不知道爲什麽效率有一點低，可能早上被 4 節思政課折磨的緣故，下午就看了會兒漫畫打了會鐵道，晚上再吃一個肯爺爺（鐵道周邊），穿插一些 b 站短視頻。有一絲絲罪惡感。
晚上稍微對 AST 進行了一點思考，LLVM 爲什麽要把諸如 “詞法分析” “語法分析” ”語義分析“ 進行一定的抽離，只是爲了代碼復用嗎，既然要代碼復用，他的目的是什麽呢，如 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="/2023/09/21/%E6%95%A3%E8%A8%98-9-21-23/" title="LLVM 學習笔记">LLVM 學習笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-09-21T04:00:00.000Z" title="发表于 2023-09-21 12:00:00">2023-09-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Notes/">Notes</a></span></div><div class="content">看到以前的一篇日期是2020年，一些情感如鯁在喉。好久沒有寫筆記了，接下來準備重啓筆記計劃，可能也會偷偷發發論文筆記
LLVM 學習LLVM 版本commit ea42c4ac6a24c28fc12d5373a851ff376ea452cf (HEAD -&gt; main)
Author: Paul Walker &lt;paul.walker@arm.com&gt;
Date:   Fri Sep 8 16:14:58 2023 +0000

    [SVE] Precommit test to show missing initialisation of call operand.
    
    When calling func_f8_and_v0_passed_via_memory the memory used to
    hold the first vector operand is allocated but not initialised.

LLVM 源碼結構├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── LI ...</div></div></div><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="/2022/04/07/HGAME2022-partialPWN/" title="HGAME2022_partialPWN">HGAME2022_partialPWN</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-07T12:00:00.000Z" title="发表于 2022-04-07 20:00:00">2022-04-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/HGAME/">HGAME</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/HGAME/%E7%95%99%E5%9D%91/">留坑</a></span></div><div class="content">
直接进行一手记录，因为 pwn 太菜所以必须好好记录一下。队友也给我好多帮助，感激不尽。

enter_the_evil_pwn_land看了 chuj 的解法之后才发现 pwn 的工具好丰富，为什么以前我会写的那么艰涩（很普通的栈溢出，但是要绕过 canary，大致有两种方法，一种是直接覆盖到 TLS 结构体里面的 stack_guard，而 TLS 结构体在栈的高地址处，如果能输入的范围很大，就可以直接覆盖。另外一种就是泄露，格式化字符串等手段。
typedef struct
&#123;
  void *tcb;        /* Pointer to the TCB.  Not necessarily the
               thread descriptor used by libpthread.  */
  dtv_t *dtv;
  void *self;        /* Pointer to the thread descriptor.  */
  int multiple_threads;
  int gscope_flag;
  uintptr ...</div></div></div><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="/2022/03/17/d3d12-8/" title="DX12 第八章学习">DX12 第八章学习</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-03-17T12:00:00.000Z" title="发表于 2022-03-17 20:00:00">2022-03-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/DX12/">DX12</a></span></div><div class="content">DX12-8th算是复习一点 games101 的东西了。
2.2变换法向量，证明过程使用 unT &#x3D; u·n 蛮有意思



4朗伯余弦定理，辐射通量（radiant flux），辐照度（irradiance）。
5漫反射（diffuse）



6环境光（ambient），用于简单模拟其他物体反射过来的间接光照



7Fresnel equations（菲涅尔等式），Schlick approximation
粗糙度（roughness），镜面瓣（specular lobe）镜面反射光（specular ）



8总结了光照模型的概述
指向光源的向量表面法线光向量和观察向量之间的中间向量入射环境光量入射直射光量根据表面反射率反射的入射光量朗伯余弦定理中间向量与光向量之间的夹角根据菲涅尔效应，关于中间向量所反射到观察者眼中的光量控制表面粗糙度指定和之间的所有微平面片段的分布情况（所占比例）镜面反射过程中，为了模拟能量守恒所采用的归一化因子



在书中的着色器代码中也控制了 n·h 非负
9一些名词光泽度（shininess）粒度（granularity）
16.1Mo ...</div></div></div><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="/2022/03/16/d3d12-7/" title="DX12 第七章习题">DX12 第七章习题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-03-16T12:00:00.000Z" title="发表于 2022-03-16 20:00:00">2022-03-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/DX12/">DX12</a></span></div><div class="content">DX12-7th7th Capturesomething before 7记忆被清空了，有点搞不懂 worldViewProj 是怎么产生的了，还有 cb 是怎么绑定的？
world 就是物体在世界空间的位置
view 是物体从世界空间，变换到摄像机空间（视察空间）的矩阵
Proj 则是物体在视察空间中映射到二维平面上的矩阵

constant buffer 的绑定过程，以下是需要绑定的结构体
// 需要绑定的 CB
struct ObjectConstants
&#123;
    DirectX::XMFLOAT4X4 World = MathHelper::Identity4x4();
&#125;;
struct PassConstants
&#123;
    DirectX::XMFLOAT4X4 View = MathHelper::Identity4x4();
    DirectX::XMFLOAT4X4 InvView = MathHelper::Identity4x4();
    DirectX::XMFLOAT4X4 Proj = MathHelper::Id ...</div></div></div><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="/2022/03/13/d3d12-6/" title="DX12 第六章习题">DX12 第六章习题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-03-13T12:00:00.000Z" title="发表于 2022-03-13 20:00:00">2022-03-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/DX12/">DX12</a></span></div><div class="content">DX12-6th6th Capture6.13.7Q: Merge the vertices of a box and pyramid (Exercise 4) into one large vertex buffer. Also merge the indices of the box and pyramid into one large index buffer (but do not update the index values). Then draw the box and pyramid one-by-one using the parameters of ID3D12CommandList::DrawIndexedInstanced. Use the world transformation matrix so that the box and pyramid are disjoint in world space

只要配置两个 submesh 以及在 drawIndexInstanced 的时候注意，遗憾的是我在分开两个的时候我是直接把他们坐标该改一下的。不大好
vi ...</div></div></div><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="/2021/12/27/sctf_2021_ret2text/" title="SCTF 2021 ret2text">SCTF 2021 ret2text</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-27T12:00:00.000Z" title="发表于 2021-12-27 20:00:00">2021-12-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C/">符号执行</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C/Angr/">Angr</a></span></div><div class="content">CheckIn_ret2text符号执行部分受限于对 angr 的理解以及不是很清楚一些高级接口，只能手糊一个 hook + state 携带输入字符串符号执行过程
因为代码写的比较杂凑为理解以下代码需要知道 state.memory 中 0x0 第一个字节存着多少次输入。0x100偏移之后每个0x100存储一个结构 { type:1bytes ，size:1bytes , str:size } 只能说是对症下药了。为了找到栈溢出，需要存储上一次输入字符串可以的长度，我保存在 input_str_off&#x3D; 0x100000 。我的命名多少有点古怪，明明是个 size ，我把它命名成了 str_off …
要是有什么更好的写法，一定要告诉我呀~
2022&#x2F;3&#x2F;7 补充 hook 的写法可以写的简洁一些。这道题可以直接执行，不需要自己去控制程序流或者分析。找到非约束的状态直接求解输入即可。
import claripy
import angr
from angr import SimProcedure
import IPython
import archinf ...</div></div></div><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="/2021/08/16/angr_learn_introduction/" title="Angr 学习与实践">Angr 学习与实践</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-16T12:00:00.000Z" title="发表于 2021-08-16 20:00:00">2021-08-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C/">符号执行</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C/Angr/">Angr</a></span></div><div class="content">Angrexamplelittle_engine | DONE
Script author: Michael Reeves (github: @mastermjr)Script runtime: 3 min 26 seconds (206 seconds)Concepts presented:stdin constraining, concrete optimization with Unicorn


映入眼帘的看上去应该是 CPP 编译的程序。似乎是因为一些优化或者语言本身的问题，简单的一个程序流，看上去极其诡异。动调后得知。程序会吞掉第一个输入的字符(字符的ascii要小于 0x7E)。然后剩下的是输入 flag ，flag 的长度是 75，不同函数之间通过 RDI 传递传出字符串等参数。在分析的时候会发现程序会把输入的字符串转储到 RDI 所指向的一个数据结构中。根据不同的长度进行不同的转储（我打赌源程序猿不可能写出这种东西）
然后经过一个简单的加密，不清楚什么算法，这部分通过 angr 当一个黑盒不管了。

最后通过在死亡的路径中，寻找输出流中存在 “Chugga” 的，就能 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="/2021/07/19/rctf_valgrind/" title="RCTF Valgrind">RCTF Valgrind</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-19T12:00:00.000Z" title="发表于 2021-07-19 20:00:00">2021-07-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C/">符号执行</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C/Angr/">Angr</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C/Angr/RCTF/">RCTF</a></span></div><div class="content">Valgrind给的是 angr.SimState 对象在执行过程中输出的日志。由于网上资料也比较多，或许有些杂乱，我也做一些介绍。让大家也能快速上手。暂时就探索到这，有空再看看源码，再深入一些。

Angr : A powerful and user-friendly binary analysis platform!

一些介绍配置 angr 环境 https://docs.angr.io/introductory-errata/install
## 对于我的 wsl2 
git clone https://github.com/angr/angr-dev
cd angr-dev
./setup.sh -i -e angr
## 要是有包下不来，挂个代理，或者手动下，都可以
## 接下来要配置 ~/.bashrc
export WORK_HOME = ~/.vituralenvs
source $(find / -name "virtualenvwrapper.sh")
## 这个也可以手动设置路径
## 发现 angr venv 中导入不了 angr
## 可以在 angr ve ...</div></div></div><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="/2021/05/22/dll_injection_hook/" title="Dll INJECTION &amp;&amp; HOOK">Dll INJECTION &amp;&amp; HOOK</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-22T12:00:00.000Z" title="发表于 2021-05-22 20:00:00">2021-05-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Windows/">Windows</a></span></div><div class="content">DLL INJECTION &amp;&amp; HOOK
《关于我一本书看到一半却咕了一个学期这件事》

粗略的看了一下，dll injection 和 hook 发现这俩应该是得放一起的，因为涉及的知识比较难做分隔，或者说基础知识很是接近，越是了解，就会发现越要了解 windows 的 loader 机制，windows 的一些较为有用的 api ，甚至是 windows 的内核数据结构，直接深入 windows 的 r0 还是比较猛的。
也因此这篇文章注定是随着我的学习不断更新的。
1.使用拓展最后一个节区进行注入已经写好的的DLL
这个在运行被注入的 notepad 的过程中，DLL 中的 Msg 并不会运行，只是通过 dllenterpoint 函数执行了 dllmain ，后者调用了 msgbox，弹出一个msgbox 窗体。

text 中的 0x7800 -&gt; 0x7748 也就是肯定没有 7800 那么多数据，因此后面的可以写入的就是 0x7800-0x7748。不过不够我要的 IIT 就是了。分析给的 notepad 可以知道 ，为了不影响程序的正常运行，我们 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><a class="page-number" href="/page/4/#content-inner">4</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.imgs.ovh/2023/10/13/XDQ7p.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">RT</div><div class="author-info__description">@Vidar-Team @CTFer @Game Lover </div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/12/%E6%95%A3%E8%A8%98-10-12-23/" title="静态分析相关综述笔记">静态分析相关综述笔记</a><time datetime="2023-10-12T04:00:00.000Z" title="发表于 2023-10-12 12:00:00">2023-10-12</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2023/10/08/%E6%95%A3%E8%A8%98-10-8-23/" title="论文阅读笔记">论文阅读笔记</a><time datetime="2023-10-08T04:00:00.000Z" title="发表于 2023-10-08 12:00:00">2023-10-08</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2023/10/05/%E6%95%A3%E8%A8%98-10-5-23/" title="论文阅读笔记">论文阅读笔记</a><time datetime="2023-10-05T04:00:00.000Z" title="发表于 2023-10-05 12:00:00">2023-10-05</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2023/09/28/%E6%95%A3%E8%A8%98-9-28-23/" title="论文阅读笔记">论文阅读笔记</a><time datetime="2023-09-28T04:00:00.000Z" title="发表于 2023-09-28 12:00:00">2023-09-28</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2023/09/27/%E6%95%A3%E8%A8%98-9-27-23/" title="LLVM 摸鱼笔记">LLVM 摸鱼笔记</a><time datetime="2023-09-27T04:00:00.000Z" title="发表于 2023-09-27 12:00:00">2023-09-27</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DX12/"><span class="card-category-list-name">DX12</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/HGAME/"><span class="card-category-list-name">HGAME</span><span class="card-category-list-count">6</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/HGAME/%E7%95%99%E5%9D%91/"><span class="card-category-list-name">留坑</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Notes/"><span class="card-category-list-name">Notes</span><span class="card-category-list-count">12</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Windbg/"><span class="card-category-list-name">Windbg</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Windbg/Anti-debug/"><span class="card-category-list-name">Anti-debug</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Windows/"><span class="card-category-list-name">Windows</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/books/"><span class="card-category-list-name">books</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/mark/" style="font-size: 1.1em; color: #999">mark</a> <a href="/tags/paper/" style="font-size: 1.3em; color: #99a1ac">paper</a> <a href="/tags/MSVC/" style="font-size: 1.1em; color: #999">MSVC</a> <a href="/tags/%E7%95%99%E5%9D%91/" style="font-size: 1.17em; color: #999c9f">留坑</a> <a href="/tags/Static-Analysis/" style="font-size: 1.23em; color: #999ea6">Static Analysis</a> <a href="/tags/%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C/" style="font-size: 1.17em; color: #999c9f">符号执行</a> <a href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/" style="font-size: 1.17em; color: #999c9f">图形学</a> <a href="/tags/book/" style="font-size: 1.1em; color: #999">book</a> <a href="/tags/angr/" style="font-size: 1.17em; color: #999c9f">angr</a> <a href="/tags/Windows/" style="font-size: 1.17em; color: #999c9f">Windows</a> <a href="/tags/Hacking/" style="font-size: 1.1em; color: #999">Hacking</a> <a href="/tags/HGAME/" style="font-size: 1.37em; color: #99a4b2">HGAME</a> <a href="/tags/call-convention/" style="font-size: 1.1em; color: #999">call convention</a> <a href="/tags/LLVM/" style="font-size: 1.43em; color: #99a6b9">LLVM</a> <a href="/tags/directX-12/" style="font-size: 1.17em; color: #999c9f">directX 12</a> <a href="/tags/DLL-hook/" style="font-size: 1.1em; color: #999">DLL hook</a> <a href="/tags/anti-debug/" style="font-size: 1.1em; color: #999">anti-debug</a> <a href="/tags/vulnerability-mining/" style="font-size: 1.17em; color: #999c9f">vulnerability mining</a> <a href="/tags/RCTF/" style="font-size: 1.1em; color: #999">RCTF</a> <a href="/tags/Notes/" style="font-size: 1.5em; color: #99a9bf">Notes</a> <a href="/tags/windbg/" style="font-size: 1.1em; color: #999">windbg</a> <a href="/tags/WP/" style="font-size: 1.43em; color: #99a6b9">WP</a> <a href="/tags/Handle/" style="font-size: 1.1em; color: #999">Handle</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">五月 2021</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">31</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">58.4k</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-10-13T15:19:25.300Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By RT</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init("就算知道方法，也绝对不能去改变过去，绝不能将存在的可能性转变为既定的现实，未来是没有人能预测的，是无法重来的，正因如此人们才能接受各种痛苦，不幸与飞来横祸，迈步前进。")
  } else {
    document.getElementById("subtitle").textContent = "就"
  }
}
typedJSFn.run(subtitleType)</script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>